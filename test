<div *ngIf="activeCard === FilterCardType.TERMINATED" class="uk-margin-small">
  <mat-form-field appearance="fill">
    <mat-label>Plage de dates</mat-label>
    <mat-date-range-input [rangePicker]="picker" (dateChange)="onDateRangeChange($event)">
      <input matStartDate placeholder="Date de début" [value]="startDate" readonly>
      <input matEndDate placeholder="Date de fin" [value]="endDate" readonly>
    </mat-date-range-input>
    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-date-range-picker #picker></mat-date-range-picker>
  </mat-form-field>
</div>

import { Component, OnInit } from '@angular/core';
import { DateRange, MatDateRangeSelectionChangedEvent } from '@angular/material/datepicker';

@Component({
  // ...
})
export class TeamPageComponent implements OnInit {

  public startDate: Date;
  public endDate: Date;

  ngOnInit(): void {
    const today = new Date();
    const ninetyDaysAgo = new Date();
    ninetyDaysAgo.setDate(today.getDate() - 90);

    this.startDate = ninetyDaysAgo;
    this.endDate = today;

    // Appel initial
    this.loadTerminatedTickets(this.startDate, this.endDate);
  }

  onDateRangeChange(event: MatDateRangeSelectionChangedEvent): void {
    const start = event.value?.start;
    const end = event.value?.end;

    if (start && end) {
      this.startDate = start;
      this.endDate = end;
      this.loadTerminatedTickets(start, end);
    }
  }

  private loadTerminatedTickets(start: Date, end: Date): void {
    const filters = {
      dateStart: start.toISOString(),
      dateEnd: end.toISOString(),
      // ...ajoute d'autres filtres si nécessaire
    };

    this.ticketService.getTerminatedTickets(filters).subscribe(tickets => {
      this.tickets = tickets;
    });
  }
}


import { MatDatepickerModule } from '@angular/material/datepicker';
import { MatNativeDateModule } from '@angular/material/core';
import { MatFormFieldModule } from '@angular/material/form-field';
import { MatInputModule } from '@angular/material/input';

@NgModule({
  imports: [
    MatDatepickerModule,
    MatNativeDateModule,
    MatFormFieldModule,
    MatInputModule
  ]
})
