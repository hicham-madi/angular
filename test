import { OnChanges, AfterViewInit, SimpleChanges } from '@angular/core';

export class TicketsPageBase implements OnChanges, AfterViewInit {

  @Input() columnTemplates: Record<string, string> = {};
  @Input() columnConfig: any = {};
  @Input() tableConfigFactory!: TableConfigFactory;

  ngAfterViewInit(): void {
    Promise.resolve().then(() => {
      this.columnTemplates = {
        ...this.tableConfigFactory.getBaseTemplates(this),
        ...this.columnTemplates,
      };
      this.cdr?.detectChanges();
    });
  }

  ngOnChanges(changes: SimpleChanges): void {
    if (changes['tickets']) {
      console.log('tickets changed', this['tickets']);
    }

    this.columnTemplates = {
      ...this.tableConfigFactory.getBaseTemplates(this),
      ...this.columnTemplates,
    };
  }
}
