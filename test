// ticket-list-page.component.ts
import { FormControl } from '@angular/forms';
import { DateRange } from '@angular/material/datepicker';

export class TicketListPageComponent {
  // Contrôle pour le range
  dateRangeControl = new FormControl<DateRange<Date> | null>(null);

  ngOnInit(): void {
    const end = new Date();
    const start = new Date();
    start.setDate(end.getDate() - 90);

    // Valeur par défaut : J-90 -> aujourd’hui
    this.dateRangeControl.setValue(new DateRange<Date>(start, end));
  }
}

<input-control
  [type]="'INPUT_DATE_RANGE'"
  [control]="dateRangeControl">
</input-control>


@* ... *@
@if (control && type === 'INPUT_DATE_RANGE') {
  <div class="uk-width-expand uk-margin-auto-vertical" [ngClass]="{'invalid-select': (control.touched && control.invalid)}">
    <div class="input-wrapper input padding-large-right">
      <!-- C’est ICI qu’on lie le FormControl -->
      <mat-date-range-input
        [formControl]="control"
        [rangePicker]="picker"
        [min]="min"
        [max]="max">

        <input matStartDate placeholder="JJ/MM/AAAA" [readOnly]="true">
        <input matEndDate   placeholder="JJ/MM/AAAA" [readOnly]="true">
      </mat-date-range-input>

      <span class="icon-s18 material-symbols-outlined pointer mat-icon-right"
            (click)="control.markAsTouched(); picker.open()">event</span>

      <mat-date-range-picker #picker></mat-date-range-picker>
    </div>
  </div>
}
@* ... *@
