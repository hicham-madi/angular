<ng-template #slaLabelTpl let-row>
  <div class="sla-label">
    <div [class]="getSlaSticker(row)" class="sla-sticker">
      {{ getSlaLabel(row) }}
    </div>

    @if (!row?.recla && !!row?.recla2?.timeline) {
      <metabot-bar-timeline
        [treatmentDate]="row?.recla2?.timeline[2]?.fromValue"
        [timeline]="row?.recla2?.timeline"
        [date]="row?.recla2?.confReceptionSendingDate === 'ENVOI' ? row?.recla2?.sendingDate : row?.recla2?.receivingDate"
      ></metabot-bar-timeline>
    } @else {
      @for (step of row?.ds?.timeline || []; track step) {
        @if (step?.shortLabel === 'end') {
          <metabot-bar-timeline
            [treatmentDate]="row?.ds?.timeline[2]?.fromValue"
            [timeline]="row?.ds?.timeline"
            [date]="step?.formattedValue"
          ></metabot-bar-timeline>
          @break
        }
      }
    }
  </div>
</ng-template>
