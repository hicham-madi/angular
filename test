protected handleTabClick(tab: Tab): void {
  this.activeTab = tab;   // applique immédiatement le style actif
  this.tabClick.emit(tab);
  this.maximize();
  localStorage.removeItem('lastSelectedCard');
  this.router.navigate([this.tabsUrls.get(tab)]);
}

public ngOnInit(): void {
  const setActiveFromRoute = () => {
    let r = this.route;
    while (r.firstChild) {
      r = r.firstChild;
    }

    const ctx = r.snapshot.data?.['context'] as TicketContext | undefined;

    if (ctx === TicketContext.SOLICITATIONS || ctx === TicketContext.TERMINATED) {
      this.activeTab = Tab.SOLICITING;
    } else if (ctx === TicketContext.TEAM || ctx === TicketContext.TERMINATED_TEAM) {
      this.activeTab = Tab.MY_TEAM;
    } else if (ctx === TicketContext.REGIONAL_FUND) {
      this.activeTab = Tab.MY_REGIONAL_FUND;
    }
  };

  // première synchro à l’ouverture
  setActiveFromRoute();

  // écoute les changements de route (navigation entre onglets via URL)
  this.router.events
    .pipe(filter((e): e is NavigationEnd => e instanceof NavigationEnd))
    .subscribe(() => setActiveFromRoute());
}
