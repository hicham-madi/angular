// in SolicitingsTableComponent

public ngAfterViewInit(): void {
  queueMicrotask(() => this.cdkVirtualScroll?.checkViewportSize());
}

public onCdkScroll(): void {
  if (!this.cdkVirtualScroll) return;

  const end   = this.cdkVirtualScroll.getRenderedRange().end;
  const total = this.tickets?.length ?? 0; // <â€” use the data array, not getDataLength()

  if (total === 0) return;

  // near bottom of currently loaded items
  if (end >= total - 2 /* && this.hasPendingPage */) {   // keep the second guard only if parent sets it correctly
    this.loadMore.emit({
      sortKey: this.sort.direction ? this.sort.active : null,
      isAsc:   this.sort.direction ? this.sort.direction === 'asc' : null,
    });
  }
}

private detectChanges(): void {
  this.cdr.detectChanges();
  setTimeout(() => this.cdkVirtualScroll?.checkViewportSize());
}
