private boolean isExpertServiceReadCustomer(Ticket ticket, String userId, String edsId) {
    if (ticket == null || ticket.getClaimType() == null || ticket.getStatus() == null || ticket.getCustomer() == null) {
        return false;
    }

    // üîê V√©rifie que le ticket appartient √† l'utilisateur
    boolean isSameUser =
        userId != null && userId.equals(ticket.getCustomerId()) ||
        (Boolean.TRUE.equals(ticket.getCustomer().isEds()) && edsId != null && edsId.equals(ticket.getCustomer().getEdsId()));

    if (!isSameUser) {
        return false;
    }

    boolean isDS = ClaimTypeCode.DS.getCode().equals(ticket.getClaimType().getCode());

    boolean statusMatch = List.of(
        StatusTicket.NEW,
        StatusTicket.PROCESSING,
        StatusTicket.PENDING,
        StatusTicket.APPROVAL_PENDING,
        StatusTicket.APPROVAL_REFUSED
    ).contains(StatusTicket.valueOf(ticket.getStatus()));

    boolean readCustomerTrue = Boolean.TRUE.equals(ticket.getReadCustomer());

    boolean collabDoneAndUnread =
        ticket.getDs() != null &&
        Boolean.TRUE.equals(ticket.getDs().isCollabTreatmentDone()) &&
        Boolean.FALSE.equals(ticket.getReadCustomer());

    return isSameUser && isDS && statusMatch && (readCustomerTrue || collabDoneAndUnread);
}
