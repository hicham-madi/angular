// Définition locale du sort
protected sort: SortState = {
  sortKey: null,
  isAsc: null
};

protected getSortIcon(column: string): string {
  if (this.sort.sortKey !== column) {
    return 'unfold_more'; // pas trié
  }
  return this.sort.isAsc ? 'arrow_upward' : 'arrow_downward';
}

protected sortData(column: string): void {
  if (this.sort.sortKey !== column) {
    // Nouveau tri sur une colonne
    this.sort = { sortKey: column, isAsc: true };
  } else {
    // Toggle entre asc / desc / reset
    if (this.sort.isAsc === true) {
      this.sort = { sortKey: column, isAsc: false };
    } else if (this.sort.isAsc === false) {
      // Reset (pas de tri)
      this.sort = { sortKey: null, isAsc: null };
    } else {
      this.sort = { sortKey: column, isAsc: true };
    }
  }

  // Émettre vers parent
  this.sortChanged.emit(this.sort);
}
