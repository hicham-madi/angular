protected newIcon(ticket: Ticket): void {
  const next = this.getNextReadValue(ticket);   // ✅ calcule le bon toggle

  // MAJ optimiste pour déclencher le CSS immédiatement
  this.applyReadCustomerLocally(ticket, next);

  this.mbotService.updateReadCustomer(ticket.id, this.jwtService.getId()).subscribe({
    next: () => {},
    error: () => {
      // rollback en cas d’échec
      this.applyReadCustomerLocally(ticket, !next);
    }
  });
}

// Détermine la prochaine valeur correcte à appliquer
private getNextReadValue(ticket: Ticket): boolean {
  const myId = this.jwtService.getId();
  const me = ticket.discussionGroup?.users?.find(u => u.id === myId);
  return me ? !me.ticketRead : !ticket.readCustomer;
}
