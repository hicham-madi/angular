.table-scroll-wrapper {
  position: relative;
}

.mat-header-row, .mat-header-cell {
  position: sticky;
  top: 0;
  z-index: 2;
  background: white;
}



<div class="table-scroll-wrapper">

  <!-- TABLE FIXE POUR LES HEADERS UNIQUEMENT -->
  <table mat-table [dataSource]="[]" matSort class="mat-elevation-z8">
    <ng-container *ngFor="let column of displayedColumns" [matColumnDef]="column">
      <th mat-header-cell *matHeaderCellDef
          style="vertical-align: middle;"
          [ngStyle]="columnConfig[column]?.style || {}"
          (click)="sortData(column)">
        <ng-container *ngIf="column !== 'slaLabel' && column !== 'domainLabel'; else htmlLabel">
          {{ columnConfig[column]?.label || column }}
        </ng-container>
        <ng-template #htmlLabel>
          <span style="line-height: 1.4;" [innerHTML]="columnConfig[column]?.label || column"></span>
        </ng-template>

        <ng-container *ngIf="column !== 'action'">
          <mat-icon class="sort-icon" fontIcon="{{ getSortIcon(column) }}"></mat-icon>
        </ng-container>
      </th>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  </table>

  <!-- SCROLLABLE BODY -->
  <cdk-virtual-scroll-viewport itemSize="40" style="height: 700px;" (scrolledIndexChange)="onCdkScroll()">
    <table mat-table [dataSource]="tickets" class="mat-elevation-z8">
      <ng-container *ngFor="let column of displayedColumns" [matColumnDef]="column">
        <td mat-cell *matCellDef="let row" [ngStyle]="columnConfig[column]?.style || {}">
          <ng-container *ngIf="columnTemplates[column]">
            <ng-container *ngTemplateOutlet="columnTemplates[column]; context: { $implicit: row }"></ng-container>
          </ng-container>
        </td>
      </ng-container>

      <tr mat-row *matRowDef="let row; columns: displayedColumns"
          [class.readCustomer]="isReadCustomer(row)"
          (click)="rowClick?.(row)">
      </tr>
    </table>
  </cdk-virtual-scroll-viewport>
</div>
