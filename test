private applyReadCustomerLocally(ticket: Ticket, value: boolean): void {
  const idx = this.tickets.findIndex(t => t.id === ticket.id);
  if (idx === -1) return;

  let newValue = value;

  // Vérifie si l’utilisateur courant existe dans le discussionGroup et a ticketRead = true
  if (ticket.discussionGroup?.users?.some(u => u.id === this.jwtService.getId() && u.ticketRead)) {
    newValue = !ticket.readCustomer; // on inverse
  }

  const updated: Ticket = { ...this.tickets[idx], readCustomer: newValue };

  this.tickets = [
    ...this.tickets.slice(0, idx),
    updated,
    ...this.tickets.slice(idx + 1)
  ];

  this.cdr.markForCheck();
}
