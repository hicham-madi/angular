import { takeUntilDestroyed } from '@angular/core/rxjs-interop';

export class FilterBarComponent {
  searchTextControl = new FormControl<string>('');

  // Initialiseur de champ = contexte d’injection ✅
  private readonly _sub = this.searchTextControl.valueChanges
    .pipe(
      debounceTime(300),
      distinctUntilChanged(),
      takeUntilDestroyed() // ✅ ok ici
    )
    .subscribe(v => this.searchChanged.emit((v ?? '').trim()));
}
