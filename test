ngOnInit(): void {
  this.route.queryParamMap.subscribe((params) => {
    const card = params.get('card');
    const payload = this.buildPayload(); // méthode existante si vous avez déjà

    if (card) {
      payload.card = card;
      this.ticketService.getTicketsByCard(payload).subscribe((data) => {
        this.tickets = data.list;
      });
    } else {
      this.ticketService.getTicketListV2(payload).subscribe((data) => {
        this.tickets = data.list;
      });
    }
  });
}}

if (this.activeCard && this.activeCard !== FilterCardType.NONE) {
  this.ticketService.getTicketsByCard(this.buildPayload()).subscribe((data) => {
    this.tickets = data.list;
  });
} else {
  this.loadTickets(FilterCardType.NONE, TicketContext.SOLICITATIONS);
}
private loadTicketsFromCard(): void {
  const payload = this.buildPayload(); // ou adaptez selon votre structure
  payload.card = this.activeCard;

  this.ticketService.getTicketsByCard(payload).subscribe((data) => {
    this.tickets = data.list;
  });
}

if (this.activeCard && this.activeCard !== FilterCardType.NONE) {
  this.loadTicketsFromCard();
} else {
  this.loadTickets(FilterCardType.NONE, TicketContext.SOLICITATIONS);
}
